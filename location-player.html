<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <title>map</title>
    <link rel="stylesheet" type="text/css" href="map.css">
</head>

<body>
    <div id="map_container"></div>
    <div id="map_control">
        <button id="start">start</button>
        <button id="next">next</button>
        <button id="stop">stop</button>
        <button id="pause">pause</button>
        <button id="resume">resume</button>
        <button id="restart">restart</button>
        <button id="addPath">addPath</button>
        <button id="updatePath">updatePath</button>
    </div>
    <script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=ttwaH5NADcpIkNc7wfMpKBpK"></script>
    <script src="https://code.jquery.com/jquery-3.2.1.js"></script>
    <script src="map.js"></script>
    <script src="location-player.js"></script>
    <script>

        var locations = [
            { "lng": 117.242926, "lat": 39.074929 }, 
            { "lng": 117.264773, "lat": 39.078514 },
            { "lng": 117.281302, "lat": 39.080643 }, 
            { "lng": 117.290932, "lat": 39.070223 }, 
            { "lng": 117.272822, "lat": 39.058906 }, 
            { "lng": 117.260605, "lat": 39.054311 }, 
            { "lng": 117.23344, "lat": 39.048819 }, 
            { "lng": 117.211306, "lat": 39.061147 }
        ];

        var points = toMapPoints(locations);

        var player = new LocationPlayer(points);

        function _click(id, fn) {
            document.getElementById(id).addEventListener('click', fn);
        }

        _click('start', function () {
        });

        _click('next', function () {
            player.next(function(point, playIndex, total){
                console.log(point, playIndex, total);
                addMapMarker(map, point);
            }, function () {
                console.log('empty');
            });
        });

        _click('stop', function () {
        });

        _click('pause', function () {
        });

        _click('resume', function () {
        });

        _click('restart', function () {
        });

        _click('addPath', function () {
        });

        _click('updatePath', function () {
        });


    </script>
</body>

</html>